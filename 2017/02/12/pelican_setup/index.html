<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <title>    Pelicanセットアップ
</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href='https://fonts.googleapis.com/css?family=Gentium+Book+Basic|Merriweather:400,300' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://eiichiromomma.github.io/theme/css/cid.css">
        <link href="https://eiichiromomma.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="CVMLAB Blog Atom Feed" />
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

            <div class="container">

<header class="blog-header">
    <h1><a href="https://eiichiromomma.github.io">CVMLAB Blog</a></h1>
    <p></p>
    <nav>
        <a href="https://eiichiromomma.github.io/">INDEX</a>
        <a href="https://eiichiromomma.github.io/archives">ARCHIVES</a>
        <a href="https://eiichiromomma.github.io/categories">CATEGORIES</a>
    </nav>
</header>

    <div class="post">

        <header>
            <h1>Pelicanセットアップ</h1>
            <p class="date">Written on <time datetime="2017-02-12T12:00:00+09:00"> 2 12, 2017</time></p>
        </header>

        <article>
            <h1>メモ用のブログ作成</h1>
<p>Markdownで書き溜めて、後でgithubのwikiに上げようと思ったまま放置されてたネタ置き場の作成。</p>
<p><a href="https://kazukousen.github.io/python-pelican-install.html">こっちの記事</a>が元ネタだがgithub.ioのところで躓いてた。</p>
<p>作業に関しては<a href="http://blog.shigepon.info/blog/2016/03/31/migrate_octopress_github_page_to_pelican/#.WJ_ZLRKLRBw">こっち</a>の方が簡潔。日付けの管理もこのサイト設定を使ってみた。</p>
<h2>GitHub Pages作成</h2>
<p>自分のアカウントでusername.github.ioのリポジトリを作成して、作業したい所にcloneしておく。以下cloneした中での作業</p>
<h2>Pelicanの設定と更新作業</h2>
<div class="highlight"><pre><span></span><code>pelican-quickstart
</code></pre></div>

<p>でGithub Pagesを使う設定にしておく。あとはcontent内にmarkdown形式のファイルを置いてから</p>
<div class="highlight"><pre><span></span><code>make html
make serve
</code></pre></div>

<p>で http://localhost:8000 から作業内容を確認できる。</p>
<div class="highlight"><pre><span></span><code><span class="n">Title</span><span class="o">:</span> <span class="n">Hello</span> <span class="n">world</span>
<span class="n">Date</span><span class="o">:</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">12</span> <span class="mi">11</span><span class="o">:</span><span class="mi">45</span>
<span class="n">Category</span><span class="o">:</span> <span class="n">Memo</span>
<span class="n">Tags</span><span class="o">:</span> <span class="n">pelican</span><span class="o">,</span> <span class="n">python</span>
<span class="n">Slug</span><span class="o">:</span> <span class="mi">20170212</span><span class="n">_post</span>
<span class="n">Author</span><span class="o">:</span> <span class="n">eiichiromomma</span>
<span class="n">Summary</span><span class="o">:</span> <span class="n">Hello</span> <span class="n">world</span>


<span class="err">#</span> <span class="err">お試し</span>

<span class="o">-</span> <span class="n">python</span>
<span class="o">-</span> <span class="n">pelican</span>
<span class="o">-</span> <span class="n">markdown</span>
</code></pre></div>

<p>確認したら</p>
<div class="highlight"><pre><span></span><code>make github
</code></pre></div>

<p>でpushしてくれる。.gitignore云々を説明しているページもあるが、outputの中身だけpushされるので不要な気もする。</p>
<h2>設定</h2>
<p>いちいちslugにタイムスタンプを埋め込むのも面倒なので、上のサイトの受け売りでディレクトリを掘るようにpelicanconf.pyを設定。ちなみにファイル名は無関係らしい。</p>
<div class="highlight"><pre><span></span><code><span class="c1">#pelicanconf.py</span>
<span class="c1">#ファイル名からslugを取得</span>
<span class="n">FILENAME_METADATA</span> <span class="o">=</span> <span class="s1">&#39;(?P&lt;date&gt;\d</span><span class="si">{4}</span><span class="s1">-\d</span><span class="si">{2}</span><span class="s1">-\d</span><span class="si">{2}</span><span class="s1">)-(?P&lt;slug&gt;.*)&#39;</span>
<span class="c1">#得られたslugからhtml生成時のurlと保存先を指定</span>
<span class="n">ARTICLE_URL</span> <span class="o">=</span> <span class="s1">&#39;{date:%Y}/{date:%m}/{date:</span><span class="si">%d</span><span class="s1">}/</span><span class="si">{slug}</span><span class="s1">/&#39;</span>
<span class="n">ARTICLE_SAVE_AS</span> <span class="o">=</span> <span class="s1">&#39;{date:%Y}/{date:%m}/{date:</span><span class="si">%d</span><span class="s1">}/</span><span class="si">{slug}</span><span class="s1">/index.html&#39;</span>
</code></pre></div>

<p>としておけば年月日でディレクトリを掘ってくれる。</p>
        </article>

        <footer>
            <p>This entry is posted in <a href="https://eiichiromomma.github.io/category/memo.html">Memo</a>.</p>
        </footer>


    </div>


<footer class="blog-footer">

    <ul class="nav">
    </ul>

    <p class="disclaimer">
    Built with <a href="http://getpelican.com">Pelican</a>, and <a href="https://github.com/hdra/Pelican-Cid">Cid</a> theme.
    </p>
</footer>
            </div>
    </body>
</html>